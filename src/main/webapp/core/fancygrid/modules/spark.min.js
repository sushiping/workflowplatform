Fancy.define("Fancy.spark.ProgressDonut",{svgns:"http://www.w3.org/2000/svg",sum:100,prefix:"fancy-spark-progress-donut-",constructor:function(a){var b=this;Fancy.apply(b,a),b.init()},init:function(){var a=this;a.initId(),a.initChart(),a.setSize(),a.setRadius(),a.setInnerRadius(),a.setParams(),a.iniColors(),a.preRender(),a.render(),a.inited!==!0&&(a.renderTo.appendChild(a.chart),a.ons())},initId:function(){var a=this,b=a.prefix||Fancy.prefix;a.id=a.id||Fancy.id(null,b),Fancy.addWidget(a.id,a)},ons:function(){var a=this;a.el.on("mouseenter",a.onMouseEnter,a),a.el.on("mouseleave",a.onMouseLeave,a),a.el.on("mousemove",a.onMouseMove,a)},onMouseEnter:function(){var a=this,b=a.el.attr("value");if(a.tipTpl){var c=new Fancy.Template(a.tipTpl);b=c.getHTML({value:b})}a.tooltip=new Fancy.ToolTip({text:'<span style="color: '+a.color+';">●</span> '+b})},onMouseLeave:function(){var a=this;a.tooltip.destroy()},onMouseMove:function(a){var b=this;b.tooltip.el.css("display","block"),b.tooltip.show(a.pageX+15,a.pageY-25)},iniColors:function(){var a=this;a.value<0?(a.backColor="#F9DDE0",a.color="#EA7369"):(a.backColor="#eee",a.color="#44A4D3")},preRender:function(){var a=this,b=a.size,c=a.chart;c.setAttribute("width",b),c.setAttribute("height",b),c.setAttribute("viewBox","0 0 "+b+" "+b)},render:function(){var a=this;a.renderBack(),a.renderProgress()},renderBack:function(){var a=this,b=a.radius,c=a.innerRadius,d=["M",a.cx,a.y1,"A",b,b,0,1,1,a.x2,a.y1,"L",a.x2,a.y2,"A",c,c,0,1,0,a.cx,a.y2].join(" "),e=document.createElementNS(a.svgns,"path");e.setAttribute("d",d),e.setAttribute("fill",a.backColor),a.chart.appendChild(e)},renderProgress:function(){var a=this,b=(a.size,a.radius),c=a.innerRadius,d=document.createElementNS(a.svgns,"path"),e=(2*Math.PI/100,a.value),f=0;e>99&&(e=99.99999),-99>e&&(e=99.99999),0>e&&(f=100+e,e*=-1);var g=e/a.sum,h=f+e,i=["M"].concat(a.scale(f,b),"A",b,b,0,g>.5?1:0,1,a.scale(h,b),"L");c?i=i.concat(a.scale(h,c),"A",c,c,0,g>.5?1:0,0,a.scale(f,c)):i.push(cx,cy),i=i.join(" "),d.setAttribute("d",i),d.setAttribute("fill",a.color),a.chart.appendChild(d)},initChart:function(){var a=this,b=Fancy.get(a.renderTo);a.renderTo=Fancy.get(a.renderTo).dom,0===b.select("svg").length?a.chart=document.createElementNS(a.svgns,"svg:svg"):(a.chart=b.select("svg").dom,a.chart.innerHTML="",a.inited=!0),a.el=Fancy.get(a.chart),a.el.attr("id",a.id),a.value<1&&a.value>0?a.el.attr("value",a.value.toFixed(1)):a.value>-1&&a.value<0?a.el.attr("value",a.value.toFixed(1)):a.el.attr("value",a.value.toFixed(0))},scale:function(a,b){var c=this,d=Math.PI,e=c.sum,f=a/e*d*2-d/2;return[b*Math.cos(f)+c.cx,b*Math.sin(f)+c.cy]},radians:function(a){return a*Math.PI/180},setSize:function(){var a=this;a.width=a.width||a.height||a.size||30,a.height=a.height||a.width||a.size||30,a.size=a.size||a.height},setRadius:function(){var a=this;a.radius=a.radius||a.height/2},setInnerRadius:function(){var a=this;a.innerRadius=a.innerRadius||a.height/2-a.height/4},setParams:function(){var a=this,b=(a.size,a.radius),c=a.innerRadius,d=a.height,e=a.width;a.cy=d/2,a.y1=a.cy-b,a.y2=a.cy-c,a.cx=e/2,a.x2=a.cx-.01}}),Fancy.define("Fancy.spark.GrossLoss",{maxValue:100,tipTpl:'<span style="color: {color};">●</span> {value} {suffix}',constructor:function(a){var b=this;Fancy.apply(b,a),b.init()},init:function(){var a=this;a.preRender(),a.render(),a.inited!==!0&&a.ons()},ons:function(){var a=this;a.el.on("mouseenter",a.onMouseEnter,a),a.el.on("mouseleave",a.onMouseLeave,a),a.el.on("mousemove",a.onMouseMove,a)},onMouseEnter:function(){var a,b=this,c=b.el.attr("value"),d=b.el.css("background-color"),e="";b.percents&&(e=" %");var f=new Fancy.Template(b.tipTpl);a=f.getHTML({value:c,color:d,suffix:e}),b.tooltip=new Fancy.ToolTip({text:a})},onMouseLeave:function(){var a=this;a.tooltip.destroy()},onMouseMove:function(a){var b=this;b.tooltip.el.css("display","block"),b.tooltip.show(a.pageX+15,a.pageY-25)},preRender:function(){},render:function(){var a=this,b=a.column,c=b.width,d=c/a.maxValue,e=0,f=0,g=a.value,h="";0>g?(e=-g*d/2,a.lossColor&&(h="background-color:"+a.lossColor+";"),g='<div class="fancy-grid-grossloss-loss" style="'+h+"width:"+e+'%">&nbsp;</div>'):(f=g*d/2,a.grossColor&&(h="background-color:"+a.grossColor+";"),g='<div class="fancy-grid-grossloss-gross" style="'+h+"width:"+f+'%">&nbsp;</div>'),a.renderTo.innerHTML=g,a.value<0?a.el=Fancy.get(a.renderTo).select(".fancy-grid-grossloss-loss").item(0):a.el=Fancy.get(a.renderTo).select(".fancy-grid-grossloss-gross").item(0),a.el.attr("value",a.value.toFixed(2))}}),Fancy.define("Fancy.spark.ProgressBar",{tipTpl:"{value} {suffix}",constructor:function(a){var b=this;Fancy.apply(b,a),b.init()},init:function(){var a=this;a.render(),a.inited!==!0&&a.ons()},ons:function(){var a=this;a.el.on("mouseenter",a.onMouseEnter,a),a.el.on("mouseleave",a.onMouseLeave,a),a.el.on("mousemove",a.onMouseMove,a)},onMouseEnter:function(){var a=this,b=a.el.attr("value"),c="%";a.percents===!1&&(c="");var d=new Fancy.Template(a.tipTpl),e=d.getHTML({value:b,suffix:c});a.tooltip=new Fancy.ToolTip({text:e})},onMouseLeave:function(){var a=this;a.tooltip.destroy()},onMouseMove:function(a){var b=this;b.tooltip.el.css("display","block"),b.tooltip.show(a.pageX+15,a.pageY-25)},render:function(){var a,b=this,c=b.column,d=c.width-18,e=d/b.maxValue,f=b.value*e,g=b.value;g=b.percents===!1?b.value:1>g?b.value.toFixed(1):b.value.toFixed(0),a='<div value="'+g+'" class="fancy-grid-column-progress-bar" style="width:'+f+'px">&nbsp;</div>',b.renderTo.innerHTML=a,b.el=Fancy.get(b.renderTo).select(".fancy-grid-column-progress-bar").item(0)}});